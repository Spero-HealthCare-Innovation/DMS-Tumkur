name: Block Disallowed Merges

on:
  pull_request:

jobs:
  block-merges:
    runs-on: ubuntu-latest
    steps:
      - name: Check disallowed source â†’ target
        run: |
          SRC="${{ github.head_ref }}"
          DEST="${{ github.base_ref }}"

          echo "ğŸ” Checking merge: $SRC â†’ $DEST"

          if [[ "$SRC" == "Backend" && "$DEST" == "Testing" ]]; then
            echo "âŒ Merging Backend â†’ Testing is not allowed!"
            exit 1
          # elif [[ "$SRC" == "main" && "$DEST" == "testing" ]]; then
          #   echo "âŒ Merging main â†’ testing is not allowed!"
          #   exit 1
          # elif [[ "$SRC" == "development" && "$DEST" == "testing" ]]; then
          #   echo "âŒ Merging development â†’ testing is not allowed!"
          #   exit 1
          else
            echo "âœ… Allowed merge: $SRC â†’ $DEST"
          fi
